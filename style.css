:root {
    --font-family: 'Inter', sans-serif;
    --transition-speed-fast: 0.3s;
    --transition-speed-med: 0.6s;
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}

/* --- DEFINICIJE TEMA (ostaju iste kao pre) --- */
body.dark-theme {
    --bg-color: #0d1117; --primary-text: #e6edf3; --secondary-text: #7d8590;
    --accent-gradient: linear-gradient(45deg, #f72585, #7209b7);
    --card-bg: rgba(30, 36, 46, 0.8); --card-border: rgba(137, 147, 163, 0.2);
    --shadow: rgba(0,0,0,0.4); --primary-btn-bg: #238636;
    --game-board-bg: rgba(0,0,0,0.3); --game-board-frame: transparent;
    --grid-line-color: rgba(107, 114, 128, 0.3); --accent-highlight-color: #ffc9e5;
}
body.light-theme {
    --bg-color: #f0f2f5; --primary-text: #1c1e21; --secondary-text: #606770;
    --accent-gradient: linear-gradient(45deg, #007bff, #00aaff);
    --card-bg: rgba(255, 255, 255, 0.8); --card-border: rgba(0, 0, 0, 0.1);
    --shadow: rgba(0,0,0,0.1); --primary-btn-bg: #007bff;
    --game-board-bg: rgba(255,255,255,0.8); --game-board-frame: transparent;
    --grid-line-color: rgba(0, 0, 0, 0.15); --accent-highlight-color: #cce5ff;
}
body.neon-theme {
    --bg-color: #000000; --primary-text: #00ffde; --secondary-text: #8d8d8d;
    --accent-gradient: linear-gradient(45deg, #00ffde, #ff00ff);
    --card-bg: rgba(15, 15, 15, 0.8); --card-border: rgba(0, 255, 222, 0.3);
    --shadow: rgba(0, 255, 222, 0.2); --primary-btn-bg: #ff00ff;
    --game-board-bg: rgba(255,255,255,0.05);
    --game-board-frame: linear-gradient(160deg, #ff00ff, #00ffde, #ff00ff);
    --grid-line-color: rgba(0, 255, 222, 0.2); --accent-highlight-color: #d1fff8;
    text-shadow: 0 0 2px var(--secondary-text);
}
body.gold-theme {
    --bg-color: #1a160d; --primary-text: #f5e8c7; --secondary-text: #a89a7f;
    --accent-gradient: linear-gradient(45deg, #ffd700, #f0e68c, #daa520);
    --card-bg: rgba(40, 32, 20, 0.8); --card-border: rgba(255, 215, 0, 0.2);
    --shadow: rgba(0,0,0,0.5); --primary-btn-bg: #b8860b;
    --game-board-bg: rgba(0,0,0,0.2);
    --game-board-frame: linear-gradient(160deg, #b8860b, #ffd700, #b8860b);
    --grid-line-color: rgba(255, 215, 0, 0.2); --accent-highlight-color: #fff8e1;
}
body.silver-theme {
    --bg-color: #111827; --primary-text: #d1d5db; --secondary-text: #6b7280;
    --accent-gradient: linear-gradient(45deg, #9ca3af, #e5e7eb, #9ca3af);
    --card-bg: rgba(31, 41, 55, 0.8); --card-border: rgba(156, 163, 175, 0.2);
    --shadow: rgba(0,0,0,0.5); --primary-btn-bg: #4b5563;
    --game-board-bg: rgba(0,0,0,0.3); --game-board-frame: transparent;
    --grid-line-color: rgba(107, 114, 128, 0.3); --accent-highlight-color: #f9fafb;
}
.neon-theme h1, .neon-theme h2, .gold-theme h1, .gold-theme h2 { text-shadow: 0 0 8px var(--shadow); }

/* --- OSNOVNI STILOVI TELA I POZADINE --- */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { height: -webkit-fill-available; }
body { font-family: var(--font-family); background: var(--bg-color); color: var(--primary-text); margin: 0; overflow: hidden; height: 100vh; height: -webkit-fill-available; width: 100vw; transition: background-color 0.5s, color 0.5s; }
@keyframes aurora-move { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
.aurora-background { position: fixed; top: 50%; left: 50%; width: 150vmax; height: 150vmax; animation: aurora-move 40s infinite linear; z-index: -1; }
.aurora-dot { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.6; }
.aurora-dot:nth-child(1) { width: 600px; height: 600px; top: 0; left: 10%; background: #f72585; } .aurora-dot:nth-child(2) { width: 500px; height: 500px; top: 20%; left: 60%; background: #7209b7; } .aurora-dot:nth-child(3) { width: 400px; height: 400px; top: 70%; left: 20%; background: #4361ee; }

/* --- EKRANI I TRANZICIJE --- */
.screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; padding: 1rem; opacity: 0; visibility: hidden; pointer-events: none; transform: scale(0.95); transition: opacity var(--transition-speed-med) var(--ease-out-expo), transform var(--transition-speed-med) var(--ease-out-expo); }
.screen.active { opacity: 1; visibility: visible; pointer-events: auto; transform: scale(1); }
.screen h2 { font-size: 2rem; font-weight: 900; text-align: center; margin: 1rem 0 2rem 0; }

/* --- GLAVNI MENI - NOVI IZGLED --- */
#main-menu-screen { align-items: center; justify-content: center; text-align: center; perspective: 1500px; }
.main-menu-header { position: absolute; top: 1rem; right: 1rem; display: flex; gap: 1rem; z-index: 10; }
.menu-container { width: 100%; }
.menu-container h1 { font-size: clamp(3rem, 15vw, 6rem); font-weight: 900; line-height: 1; letter-spacing: -0.05em; background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 2rem; transform: translateZ(60px); }
.menu-item { /* ... ostaje isto kao pre ... */ }

/* --- EKRAN ZA IZBOR MODA --- */
/* ... ostaje isto kao pre ... */

/* --- EKRAN SA IGROM (TETRIS UI IZMENE) --- */
#tetris-ui-header { display: none; } /* Sakriveno po defaultu */
body.tetris-active #tetris-ui-header.tetris-only { display: flex; }
body.puzzle-active .puzzle-only { display: flex; }
/* ... ostatak game-screen stilova ostaje isti ... */

/* --- LIDERBORD MODAL --- */
.leaderboard-filters { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
.leaderboard-filters select {
    flex: 1; background: var(--card-bg); color: var(--primary-text);
    border: 1px solid var(--card-border); border-radius: 0.5rem; padding: 0.75rem;
    font-size: 1rem;
}
#leaderboard-loading { text-align: center; padding: 2rem; color: var(--secondary-text); }
#leaderboard-list { list-style: none; padding: 0; margin: 0; max-height: 50vh; overflow-y: auto; }
#leaderboard-list li { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1rem; border-radius: 0.5rem; margin-bottom: 0.5rem; }
#leaderboard-list li:nth-child(odd) { background: rgba(0,0,0,0.1); }
#leaderboard-list li .rank { font-weight: 700; color: var(--secondary-text); flex-basis: 15%; }
#leaderboard-list li .name { font-weight: 500; flex-basis: 55%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#leaderboard-list li .score { font-weight: 700; flex-basis: 30%; text-align: right; }
#leaderboard-list li:nth-child(1) .rank, #leaderboard-list li:nth-child(1) .name { color: #FFD700; font-weight: 900; }
#leaderboard-list li:nth-child(2) .rank, #leaderboard-list li:nth-child(2) .name { color: #C0C0C0; font-weight: 900; }
#leaderboard-list li:nth-child(3) .rank, #leaderbroard-list li:nth-child(3) .name { color: #CD7F32; font-weight: 900; }

/* --- MODALI - ISPRAVKA Z-INDEX --- */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
    display: flex; justify-content: center; align-items: center;
    z-index: 2000; /* Visok z-index da bude iznad svega */
    opacity: 0; visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-content {
    background: var(--card-bg); border: 1px solid var(--card-border);
    border-radius: 1rem; padding: 2rem; width: 90%; max-width: 450px;
    box-shadow: 0 10px 50px var(--shadow);
    transform: scale(0.9); transition: transform 0.4s var(--ease-out-expo);
}
.modal-overlay.active .modal-content { transform: scale(1); }

/* --- Svi ostali stilovi ostaju isti kao u prethodnom odgovoru --- */
/* (stilovi za blokove, mre≈æu, pauzu, game over, itd.) */
