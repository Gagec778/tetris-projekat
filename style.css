:root{
  --font-family:'Inter',system-ui,Segoe UI,Roboto,Arial;
  --transition-speed-fast:.2s;
  --transition-speed-med:.5s;
  --ease-out-expo:cubic-bezier(.16,1,.3,1);
}
body{margin:0;font-family:var(--font-family);background:#0d1117;color:#e6edf3;overflow:hidden}
.screen{position:absolute;inset:0;display:flex;flex-direction:column;padding:1rem;opacity:0;visibility:hidden;pointer-events:none;transition:opacity var(--transition-speed-med) ease}
.screen.active{opacity:1;visibility:visible;pointer-events:auto}
/* themes */
body.dark-theme{--bg:#0d1117;--card:rgba(30,36,46,.85);--border:rgba(137,147,163,.2);--text:#e6edf3;--muted:#7d8590;--primary:#238636;--grid:rgba(107,114,128,.4)}
body.light-theme{--bg:#f0f2f5;--card:#fff;--border:rgba(0,0,0,.1);--text:#1c1e21;--muted:#606770;--primary:#007bff;--grid:rgba(0,0,0,.2)}
body.neon-theme{--bg:#000;--card:rgba(15,15,15,.9);--border:rgba(0,255,222,.3);--text:#00ffde;--muted:#8d8d8d;--primary:#ff00ff;--grid:rgba(0,255,222,.3)}
body.gold-theme{--bg:#1a160d;--card:rgba(40,32,20,.9);--border:rgba(255,215,0,.25);--text:#f5e8c7;--muted:#a89a7f;--primary:#b8860b;--grid:rgba(255,215,0,.3)}
body{background:var(--bg);color:var(--text)}
/* aurora */
.aurora-background{position:fixed;top:50%;left:50%;width:150vmax;height:150vmax;transform:translate(-50%,-50%);pointer-events:none;z-index:-1;animation:spin 40s linear infinite}
.aurora-dot{position:absolute;border-radius:50%;filter:blur(100px);opacity:.6}
.aurora-dot:nth-child(1){width:600px;height:600px;top:0;left:10%;background:#f72585}
.aurora-dot:nth-child(2){width:500px;height:500px;top:20%;left:60%;background:#7209b7}
.aurora-dot:nth-child(3){width:400px;height:400px;top:70%;left:20%;background:#4361ee}
@keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg)}}
/* header */
.main-menu-header{position:absolute;top:1rem;left:1rem;right:1rem;display:flex;justify-content:space-between;align-items:center;z-index:5}
.gem-balance{display:flex;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:999px;padding:.4rem .8rem;font-weight:800;gap:.5rem}
.gem-svg{width:26px;height:26px;fill:#31d0ff;filter:drop-shadow(0 0 6px rgba(49,208,255,.7))}
.header-buttons{display:flex;gap:.5rem}
.icon-btn{background:transparent;border:1px solid var(--border);border-radius:12px;padding:.6rem .8rem;color:var(--text);cursor:pointer}
.icon-btn.small{font-size:18px}
.icon-btn.large{font-size:20px}
.pulse-dot{position:absolute;margin-left:-8px;margin-top:-6px;width:12px;height:12px;background:#ff4769;border-radius:50%;box-shadow:0 0 0 0 rgba(255,71,105,.7);animation:pulse 1.5s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,71,105,.7)}70%{box-shadow:0 0 0 12px rgba(255,71,105,0)}100%{box-shadow:0 0 0 0 rgba(255,71,105,0)}}
/* menu */
.menu-container{display:flex;flex-direction:column;align-items:center;gap:1rem;padding-top:3.5rem}
.menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 900px;
  margin: 0 auto 1rem;
}
.menu-header h1 {
  font-size: clamp(2.8rem, 12vw, 5rem);
  font-weight: 900;
  letter-spacing: -0.04em;
  margin: 0;
  background: linear-gradient(45deg, #f72585, #7209b7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 0.95;
  text-align: center;
  flex-grow: 1;
}
.right-icons {
  display: flex;
  gap: 0.5rem;
}
.game-tabs {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin: 1rem 0;
}
.game-tab {
  padding: 0.8rem 1.5rem;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  color: var(--text);
  font-weight: 800;
  cursor: pointer;
  transition: all 0.2s ease;
}
.game-tab:hover {
  background: rgba(255, 255, 255, 0.1);
}
.game-tab.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}
.menu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;width:min(900px,100%);}
.menu-card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;display:flex;gap:1rem}
.menu-card .card-media{width:120px;display:grid;place-items:center;background:rgba(255,255,255,.03)}
.menu-card .card-media img{width:80px;height:80px}
.menu-card .card-body{padding:1rem;display:flex;flex-direction:column;gap:.5rem}
.menu-card.disabled{opacity:.6}
.primary-btn{background:var(--primary);border:none;color:white;padding:.7rem 1rem;border-radius:.8rem;font-weight:800;cursor:pointer}
.primary-btn.secondary{background:transparent;border:1px solid var(--border);color:var(--text)}
/* previews */
.preview-strip{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;width:min(900px,100%);margin-top:.5rem}
.preview-pod{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1rem}
.frame-title{font-size:.8rem;color:var(--muted);text-transform:uppercase;margin-bottom:.4rem}
.theme-preview{height:54px;border-radius:12px;background:linear-gradient(45deg,#111,#222);border:1px dashed var(--border)}
.block-preview{display:flex;gap:.4rem;align-items:center;height:54px}
.game-block{width:22px;height:22px;border-radius:6px;background:#6ee7ff;border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 2px 1px rgba(255,255,255,.35), inset 0 -2px 1px rgba(0,0,0,.25), 0 6px 14px rgba(0,0,0,.25)}
/* block styles */
body.block-style-glass .game-block{background:rgba(255,255,255,.2);backdrop-filter:blur(2px);border:1px solid rgba(255,255,255,.6);box-shadow:inset 0 1px 2px #fff}
body.block-style-wood .game-block{background:linear-gradient(135deg,#8c5a2e,#6b4522);box-shadow:inset 0 0 5px rgba(0,0,0,.5);border:1px solid #4a2d1e}
body.block-style-retro .game-block{border:2px solid var(--text);background:repeating-linear-gradient(45deg,transparent,transparent 2px,rgba(255,255,255,.08) 2px,rgba(255,255,255,.08) 4px);box-shadow:none;border-radius:2px}
/* shop */
#shop-screen h2{margin:0 0 .6rem 0;text-align:center}
.shop-tabs{display:flex;gap:.4rem;border-bottom:1px solid var(--border);margin:0 auto 1rem auto;width:min(900px,100%)}
.shop-tab{padding:.8rem 1rem;background:transparent;border:none;color:var(--muted);font-weight:800;border-bottom:2px solid transparent;cursor:pointer}
.shop-tab.active{color:var(--text);border-bottom-color:var(--primary)}
.shop-container{width:min(900px,100%);height:calc(100vh - 180px);overflow:auto;margin:0 auto}
.shop-grid{display:none;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;padding-bottom:2rem}
.shop-grid.active{display:grid}
.shop-item{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:.8rem;display:flex;flex-direction:column;gap:.5rem;align-items:center;text-align:center;position:relative}
.shop-item .thumb{width:50px;height:50px;display:grid;place-items:center;border-radius:10px;background:rgba(255,255,255,.03);border:1px dashed var(--border);overflow:hidden}
.shop-item.premium{outline:2px solid gold;box-shadow:0 0 12px rgba(255,215,0,.25)}
.shop-item .title{font-weight:900}
.price{display:flex;align-items:center;gap:.35rem;font-weight:800}
.price .diamond{width:16px;height:16px;display:inline-block;background:#31d0ff;clip-path:polygon(50% 0, 85% 25%, 100% 60%, 50% 100%, 0 60%, 15% 25%)}
.progressbar{width:100%;height:8px;background:rgba(255,255,255,.08);border-radius:8px;overflow:hidden}
.progressbar > span{display:block;height:100%;background:linear-gradient(90deg,gold,#ffd966);width:0%}
.shop-item .actions{display:flex;gap:.4rem}
/* achievements */
.achievements-container{width:min(900px,100%);margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
.ach-card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1rem;display:flex;flex-direction:column;gap:.5rem;position:relative}
.ach-card.claimable{outline:2px solid #34d399;box-shadow:0 0 12px rgba(52,211,153,.25)}
.ach-card .ach-actions{display:flex;gap:.4rem;align-items:center}
.badge{position:absolute;top:10px;right:10px;background:#34d399;color:#072;font-weight:900;padding:.2rem .5rem;border-radius:999px;font-size:.7rem}
/* settings */
.settings-grid{width:min(700px,100%);margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.settings-item{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1rem;display:flex;flex-direction:column;gap:.5rem}
.toggle-btn{padding:.5rem 1rem;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--text);cursor:pointer}
.toggle-btn.active{background:var(--primary);color:white;border-color:transparent}
/* game */
#puzzle-board{display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr);width:min(90vw,360px);aspect-ratio:1;border-radius:10px;background:rgba(0,0,0,.25);box-shadow:inset 0 0 0 1px var(--grid)}
.puzzle-cell{box-shadow:inset 0 0 0 1px var(--grid)}
#puzzle-pieces-container{display:flex;justify-content:space-around;align-items:center;height:90px}
.puzzle-piece{display:grid;gap:2px;cursor:grab}
.puzzle-piece .game-block{width:28px;height:28px}
.puzzle-piece.dragging{position:fixed;z-index:999;opacity:.85;transform:scale(1.1);pointer-events:none}
.puzzle-piece.bad-move{animation:shake .2s}
@keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
.ghost-path{outline:2px dashed rgba(255,255,255,.35);outline-offset:-2px}
.power-ups {
  display: flex;
  gap: 0.8rem;
  align-self: flex-start;
  margin-left: 2rem;
  margin-bottom: -1rem;
}
.power-btn {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--card);
  color: white;
  font-size: 18px;
  cursor: pointer;
  transition: transform 0.1s, background 0.2s;
}
.power-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: scale(1.1);
}
.power-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}
/* modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .3s;z-index:50}
.modal-overlay.active{opacity:1;visibility:visible}
.modal-content{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1rem 1.2rem;width:min(420px,92vw)}
.close-modal{position:absolute;margin-top:-.6rem;margin-left:calc(420px - 2rem);font-size:24px;cursor:pointer}
.progress{width:100%;height:10px;background:rgba(255,255,255,.08);border-radius:10px;overflow:hidden}
#ad-progress{height:100%;width:0;background:linear-gradient(90deg,#31d0ff,#6af7ff)}
/* back buttons */
.back-to-main-menu{background:transparent}
